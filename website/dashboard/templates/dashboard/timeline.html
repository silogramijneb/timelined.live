{% extends "dashboard/dashboard.html" %}
{% load crispy_forms_tags %}
{% block page_content %}

<div class="container-fluid px-5">
    <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">Create a new timeline</h1>
    </div>

	<div class="row" id="eventsRow">
		{% for i in maxEventNumbers %}
		<!-- Hide all created events except first -->
			{% if i > 0 %} 
				<div class="accordion pb-2 no-show" id="newTimeline{{i}}">
			{% else %}
				<div class="accordion pb-2" id="newTimeline{{i}}">
			{% endif %}
				<div class="accordion-item event-accordion" id="evAccordian{{i}}">
					<h2 class="accordion-header" id="eventNameAccordion{{i}}">
						<button id="cardTitle{{i}}" class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{i}}" aria-expanded="true" aria-controls="collapse{{i}}">New Event</button>
					</h2>
					<div id="collapse{{i}}" class="accordion-collapse collapse show" aria-labelledby="heading" data-bs-parent="#newTimeline">
						<div class="accordion-body">
							{% load crispy_forms_tags %}
							{% csrf_token %}
							{% crispy form %}
						</div>
					</div>
				</div>
			</div>
			
		{% endfor %}
	</div>
</div>

<script>
	let timeline = [];
	
	function createEvent(divNumber) {
		let thisDiv = document.getElementById('newTimeline'+divNumber);
		let nextDiv = document.getElementById('newTimeline'+(divNumber+1));
		
		/* Collapse previous div, show next div expanded */
		nextDiv.className = 'accordion pb-2';
		let collapseDiv = document.getElementById('cardTitle'+divNumber);
		collapseDiv.data.bs.toggle="collapse";
	}
</script>
{% endblock %}
